---
dg-publish: true
---
[LCR 192. 把字符串转换成整数 (atoi) - 力扣（LeetCode）](https://leetcode.cn/problems/ba-zi-fu-chuan-zhuan-huan-cheng-zheng-shu-lcof/solutions/201301/mian-shi-ti-67-ba-zi-fu-chuan-zhuan-huan-cheng-z-4/)
本题与主站 8 题相同：[8. 字符串转换整数 (atoi) - 力扣（LeetCode）](https://leetcode.cn/problems/string-to-integer-atoi/description/)
#字符串 
> [!info] 题目
> 请你来实现一个 myAtoi(string s) 函数，使其能将字符串转换成一个 32 位有符号整数（类似 C/C++ 中的 atoi 函数）。
函数 myAtoi(string s) 的算法如下：
>1. 读入字符串并丢弃无用的前导空格
>2. 检查下一个字符（假设还未到字符末尾）为正还是负号，读取该字符（如果有）。 确定最终结果是负数还是正数。 如果两者都不存在，则假定结果为正。
>3. 读入下一个字符，直到到达下一个非数字字符或到达输入的结尾。字符串的其余部分将被忽略。
>4. 将前面步骤读入的这些数字转换为整数（即，"123" -> 123， "0032" -> 32）。如果没有读入数字，则整数为 0 。必要时更改符号（从步骤 2 开始）。
>5. 如果整数数超过 32 位有符号整数范围 [−231,  231 − 1] ，需要截断这个整数，使其保持在这个范围内。具体来说，小于 −231 的整数应该被固定为 −231 ，大于 231 − 1 的整数应该被固定为 231 − 1 。
>6. 返回整数作为最终结果。

> [!cite] 示例 1
> **输入：**s = "   -42"
**输出：**-42

> [!cite] 示例 2
> **输入：**s = "4193 with words"
**输出：**4193

> [!help] 提示
> - 本题中的空白字符只包括空格字符 `' '` 。
>- 除前导空格或数字后的其余字符串外，**请勿忽略** 任何其他字符。
### 方法一
> [!example] 
根据题意，有以下四种字符需要考虑：

1. **首部空格**： 删除之即可；
2. **符号位**： 三种情况，即 ''+'' , ''-'' , ''无符号" ；新建一个变量保存符号位，返回前判断正负即可；
3. **非数字字符**： 遇到首个非数字的字符时，应立即返回；
4. **数字字符**：
	1. **字符转数字**： “此数字的 ASCII 码” 与 “ 0 的 ASCII 码” 相减即可；
	2. **数字拼接**： 若从左向右遍历数字，设当前位字符为 c ，当前位数字为 x ，数字结果为 res ，则数字拼接公式为：
		$res = 10 \times res + x$ 
		$x = ascii(c) - ascii('0')$
**数字越界处理：**
在每轮数字拼接前，判断 resresres 在此轮拼接后是否超过 2147483647 ，若超过则加上符号位直接返回。
设数字拼接边界 bndry = 2147483647 // 10 = 214748364，则以下两种情况越界：

$\begin{cases} res > bndry & 情况一：执行拼接 10 \times res \geq 2147483650 越界 \\ res = bndry, x > 7 & 情况二：拼接后是 2147483648 或 2147483649 越界 \\ \end{cases}$
​![[Pasted image 20240119152709.png]]

> [!success] 代码：
```cpp
class Solution {
public:
    int myAtoi(string str) {
        int res = 0, bndry = INT_MAX / 10;
        int i = 0, sign = 1, length = str.size();
        while(str[i] == ' ')    i++;
        if(str[i] == '-') sign = -1;
        if(str[i] == '-' || str[i] == '+') i++;
        while(i < length) {
            if(str[i] < '0' || str[i] > '9') break;
            if(res > bndry || res == bndry && str[i] > '7')
                return sign == 1 ? INT_MAX : INT_MIN;
            res = res * 10 + (str[i] - '0');
            i++;
        }
        return sign * res;
    }
};
```
> [!attention] 复杂度
> 时间复杂度：O(N)
> 空间复杂度：O(1)

