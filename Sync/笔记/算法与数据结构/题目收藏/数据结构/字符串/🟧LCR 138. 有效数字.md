---
dg-publish: true
---
[LCR 138. 有效数字 - 力扣（LeetCode）](https://leetcode.cn/problems/biao-shi-shu-zhi-de-zi-fu-chuan-lcof/solutions/278913/mian-shi-ti-20-biao-shi-shu-zhi-de-zi-fu-chuan-y-2/)
#字符串 
> [!info] 题目
> 

**有效数字**（按顺序）可以分成以下几个部分：
1. 若干空格
2. 一个 小数 或者 整数
3. （可选）一个 'e' 或 'E' ，后面跟着一个 整数
4. 若干空格
**小数**（按顺序）可以分成以下几个部分：
1. （可选）一个符号字符（'+' 或 '-'）
2. 下述格式之一：
	1. 至少一位数字，后面跟着一个点 '.'
	2. 至少一位数字，后面跟着一个点 '.' ，后面再跟着至少一位数字
	3. 一个点 '.' ，后面跟着至少一位数字
**整数**（按顺序）可以分成以下几个部分：
1. （可选）一个符号字符（'+' 或 '-'）
2. 至少一位数字
部分有效数字列举如下：`["2", "0089", "-0.1", "+3.14", "4.", "-.9", "2e10", "-90E3", "3e+7", "+6e-1", "53.5e93", "-123.456e789"]`
部分无效数字列举如下：`["abc", "1a", "1e", "e3", "99e2.5", "--6", "-+3", "95a54e53"]`
给你一个字符串 s ，如果 s 是一个 有效数字 ，请返回 true 。
> [!cite] 示例 1
> 

> [!cite] 示例 2
> 

> [!help] 提示
> - `1 <= s.length <= 20`
>- `s` 仅含英文字母（大写和小写），数字（`0-9`），加号 `'+'` ，减号 `'-'` ，空格 `' '` 或者点 `'.'` 。
### 方法一
#状态机
> [!example] 
解题思路：
本题使用有限状态自动机。根据字符类型和合法数值的特点，先定义状态，再画出状态转移图，最后编写代码即可。

字符类型：

空格 「 」、数字「 0—9 」 、正负号 「 + , − 」 、小数点 「 . 」 、幂符号 「 e , E 」 。

状态定义：

按照字符串从左到右的顺序，定义以下 9 种状态。

0. 开始的空格
1. 幂符号前的正负号
2. 小数点前的数字
3. 小数点、小数点后的数字
4. 当小数点前为空格时，小数点、小数点后的数字
5. 幂符号
6. 幂符号后的正负号
7. 幂符号后的数字
8. 结尾的空格

结束状态：
合法的结束状态有 2, 3, 7, 8 。
![[Pasted image 20240119160026.png]]
![[Pasted image 20240119160111.png]]
> [!success] 代码：
```cpp
class Solution {
public:
    bool validNumber(std::string s) {
        std::unordered_map<char, int> states[] = {
            {{' ', 0}, {'s', 1}, {'d', 2}, {'.', 4}},  // 0.
            {{'d', 2}, {'.', 4}},                        // 1.
            {{'d', 2}, {'.', 3}, {'e', 5}, {' ', 8}},   // 2.
            {{'d', 3}, {'e', 5}, {' ', 8}},              // 3.
            {{'d', 3}},                                  // 4.
            {{'s', 6}, {'d', 7}},                        // 5.
            {{'d', 7}},                                  // 6.
            {{'d', 7}, {' ', 8}},                        // 7.
            {{' ', 8}}                                   // 8.
        };
        
        int p = 0;
        char t;
        
        for (char c : s) {
            if (c >= '0' && c <= '9') t = 'd';
            else if (c == '+' || c == '-') t = 's';
            else if (c == 'e' || c == 'E') t = 'e';
            else if (c == '.' || c == ' ') t = c;
            else t = '?';
            
            if (states[p].find(t) == states[p].end()) {
                return false;
            }
            
            p = states[p][t];
        }
        
        return p == 2 || p == 3 || p == 7 || p == 8;
    }
};
```
> [!attention] 复杂度
> - **时间复杂度**：$O()$
> - **空间复杂度**：$O()$

