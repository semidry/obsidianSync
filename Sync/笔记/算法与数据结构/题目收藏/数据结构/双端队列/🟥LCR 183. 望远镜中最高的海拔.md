---
dg-publish: true
---
[LCR 183. 望远镜中最高的海拔 - 力扣（LeetCode）](https://leetcode.cn/problems/hua-dong-chuang-kou-de-zui-da-zhi-lcof/description/)
本题与主站 239 题相同：[239. 滑动窗口最大值 - 力扣（LeetCode）](https://leetcode.cn/problems/sliding-window-maximum/description/)
#双端队列
> [!info] 题目
> 科技馆内有一台虚拟观景望远镜，它可以用来观测特定纬度地区的地形情况。该纬度的海拔数据记于数组 `heights` ，其中 `heights[i]` 表示对应位置的海拔高度。请找出并返回望远镜视野范围 `limit` 内，可以观测到的最高海拔值。

> [!cite] 示例 1
> **输入：**heights = [14,2,27,-5,28,13,39], limit = 3
**输出：**[27,27,28,28,39]
**解释：**
> ---------------               -----
`[14 2 27]` -5 28 13 39---27
14 `[2 27 -5]` 28 13 39---27
14 2 `[27 -5 28]` 13 39---28
14 2 27 `[-5 28 13]` 39---28
14 2 27 -5 `[28 13 39]`---39

> [!cite] 示例 2
> 

> [!help] 提示
> 你可以假设输入总是有效的，在输入数组不为空的情况下：
>- `1 <= limit <= heights.length`
>- `-10000 <= heights[i] <= 10000`
### 方法一
> [!example] 
回忆“最小栈”问题，其使用 单调栈 实现了随意入栈、出栈情况下的 
�
(
1
)
O(1) 时间获取 “栈内最小值” 。本题同理，不同点在于 “出栈操作” 删除的是 “列表尾部元素” ，而 “窗口滑动” 删除的是 “列表首部元素” 。

窗口对应的数据结构为 **双端队列** ，本题使用 **单调队列** 即可解决以上问题。遍历数组时，每轮保证单调队列 deque ：
1. deque 内 仅包含窗口内的元素 ⇒ 每轮窗口滑动移除了元素 `heights[i−1]` ，需将 deque 内的对应元素一起删除。
2. deque 内的元素 非严格递减 ⇒ 每轮窗口滑动添加了元素 `heights[j+1]` ，需将 deque 内所有 <`heights[j+1]` 的元素删除。

> [!success] 代码：
```cpp
class Solution {
public:
    vector<int> maxAltitude(vector<int>& heights, int limit) {
        if (heights.empty() || limit == 0) return vector<int>();
        
        deque<int> deque;
        vector<int> res(heights.size() - limit + 1);
        
        // 未形成窗口
        for (int i = 0; i < limit; i++) {
            while (!deque.empty() && deque.back() < heights[i])
                deque.pop_back();
            deque.push_back(heights[i]);
        }
        res[0] = deque.front();
        
        // 形成窗口后
        for (int i = limit; i < heights.size(); i++) {
            if (deque.front() == heights[i - limit])
                deque.pop_front();
            while (!deque.empty() && deque.back() < heights[i])
                deque.pop_back();
            deque.push_back(heights[i]);
            res[i - limit + 1] = deque.front();
        }
        
        return res;
    }
};

```
> [!attention] 复杂度
> - **时间复杂度**：$O(n)$
> - **空间复杂度**：$O(limit)$

相关：
[[🟧LCR 184. 设计自助结算系统]]