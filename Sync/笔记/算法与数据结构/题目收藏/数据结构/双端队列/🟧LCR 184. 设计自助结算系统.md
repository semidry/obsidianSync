---
dg-publish: true
---
[LCR 184. è®¾è®¡è‡ªåŠ©ç»“ç®—ç³»ç»Ÿ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/dui-lie-de-zui-da-zhi-lcof/description/)
#åŒç«¯é˜Ÿåˆ— 
> [!info] é¢˜ç›®
> è¯·è®¾è®¡ä¸€ä¸ªè‡ªåŠ©ç»“è´¦ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿéœ€è¦é€šè¿‡ä¸€ä¸ªé˜Ÿåˆ—æ¥æ¨¡æ‹Ÿé¡¾å®¢é€šè¿‡è´­ç‰©è½¦çš„ç»“ç®—è¿‡ç¨‹ï¼Œéœ€è¦å®ç°çš„åŠŸèƒ½æœ‰ï¼š
>- `get_max()`ï¼šè·å–ç»“ç®—å•†å“ä¸­çš„æœ€é«˜ä»·æ ¼ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å› -1
>- `add(value)`ï¼šå°†ä»·æ ¼ä¸ºÂ `value`Â çš„å•†å“åŠ å…¥å¾…ç»“ç®—å•†å“é˜Ÿåˆ—çš„å°¾éƒ¨
>- `remove()`ï¼šç§»é™¤ç¬¬ä¸€ä¸ªå¾…ç»“ç®—çš„å•†å“ä»·æ ¼ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å› -1

æ³¨æ„ï¼Œä¸ºä¿è¯è¯¥ç³»ç»Ÿè¿è½¬é«˜æ•ˆæ€§ï¼Œä»¥ä¸Šå‡½æ•°çš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦å‡ä¸º O(1)

> [!cite] ç¤ºä¾‹ 1
> è¾“å…¥: 
`["Checkout","add","add","get_max","remove","get_max"]`
`[[],[4],[7],[],[],[]]`
è¾“å‡º: `[null,null,null,7,4,7]`

> [!cite] ç¤ºä¾‹ 2
> è¾“å…¥: 
`["Checkout","remove","get_max"]`
`[[],[],[]]`
è¾“å‡º: `[null,-1,-1]`

> [!help] æç¤º
> - `1 <= get_max, add, remove çš„æ€»æ“ä½œæ•°Â <= 10000`
>- `1 <= value <= 10^5`
### æ–¹æ³•ä¸€
> [!example] 

è€ƒè™‘åˆ©ç”¨ æ•°æ®ç»“æ„ æ¥å®ç°ï¼Œå³ç»å¸¸ä½¿ç”¨çš„ â€œç©ºé—´æ¢æ—¶é—´â€ ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè€ƒè™‘æ„å»ºä¸€ä¸ªé€’å‡åˆ—è¡¨æ¥ä¿å­˜é˜Ÿåˆ— æ‰€æœ‰é€’å‡çš„å…ƒç´  ï¼Œé€’å‡é“¾è¡¨éšç€å…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œå®æ—¶æ›´æ–°ï¼Œè¿™æ ·é˜Ÿåˆ—æœ€å¤§å…ƒç´ å°±å§‹ç»ˆå¯¹åº”é€’å‡åˆ—è¡¨çš„é¦–å…ƒç´ ï¼Œå®ç°äº†è·å–æœ€å¤§å€¼ O(1) æ—¶é—´å¤æ‚åº¦ã€‚
![[Pasted image 20240121205646.png]]
ä¸ºäº†å®ç°æ­¤é€’å‡åˆ—è¡¨ï¼Œéœ€è¦ä½¿ç”¨ åŒå‘é˜Ÿåˆ— ï¼Œå‡è®¾é˜Ÿåˆ—å·²ç»æœ‰è‹¥å¹²å…ƒç´ ï¼š
1. å½“æ‰§è¡Œå…¥é˜Ÿ add() æ—¶ï¼š è‹¥å…¥é˜Ÿä¸€ä¸ªæ¯”é˜Ÿåˆ—æŸäº›å…ƒç´ æ›´å¤§çš„æ•°å­— x ï¼Œåˆ™ä¸ºäº†ä¿æŒæ­¤åˆ—è¡¨é€’å‡ï¼Œéœ€è¦å°†åŒå‘é˜Ÿåˆ— å°¾éƒ¨æ‰€æœ‰å°äº x çš„å…ƒç´  å¼¹å‡ºã€‚
2. å½“æ‰§è¡Œå‡ºé˜Ÿ remove() æ—¶ï¼š è‹¥å‡ºé˜Ÿçš„å…ƒç´ æ˜¯æœ€å¤§å…ƒç´ ï¼Œåˆ™ åŒå‘é˜Ÿåˆ— éœ€è¦åŒæ—¶ å°†é¦–å…ƒç´ å‡ºé˜Ÿ ï¼Œä»¥ä¿æŒé˜Ÿåˆ—å’ŒåŒå‘é˜Ÿåˆ—çš„å…ƒç´ ä¸€è‡´æ€§ã€‚
> ä½¿ç”¨åŒå‘é˜Ÿåˆ—åŸå› ï¼šç»´æŠ¤é€’å‡åˆ—è¡¨éœ€è¦å…ƒç´ é˜Ÿé¦–å¼¹å‡ºã€é˜Ÿå°¾æ’å…¥ã€é˜Ÿå°¾å¼¹å‡ºæ“ä½œçš†ä¸ºÂ ï¿½(1)O(1)Â æ—¶é—´å¤æ‚åº¦ã€‚

> [!success] ä»£ç ï¼š
```cpp
class Checkout {
    queue<int> que;
    deque<int> deq;
public:
    Checkout() { }
    int get_max() {
        return deq.empty() ? -1 : deq.front();
    }
    void add(int value) {
        que.push(value);
        while(!deq.empty() && deq.back() < value)
            deq.pop_back();
        deq.push_back(value);
    }
    int remove() {
        if(que.empty()) return -1;
        int val = que.front();
        if(val == deq.front())
            deq.pop_front();
        que.pop();
        return val;
    }
};
```
> [!attention] å¤æ‚åº¦
> - **æ—¶é—´å¤æ‚åº¦**ï¼š$O(1)$
> - **ç©ºé—´å¤æ‚åº¦**ï¼š$O(N)$

ç›¸å…³ï¼š
[[ğŸŸ¥LCR 183. æœ›è¿œé•œä¸­æœ€é«˜çš„æµ·æ‹”]]